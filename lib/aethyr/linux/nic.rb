############################################################################################################
module Aethyr

  ############################################################################################################
  module Linux
  
    ##########################################################################################################
    class Nic

      ######################################################################################################
      #### class methods
      class << self

        ########################################################################################################
        def find(type = :all, options = {})
          if type.eql?(:first)
          else
            self.find_all
          end
        end
  
        ##########################################################################################################
        def find_all
          hw = XmlSimple.xml_in(`lshw -xml`, {'KeyAttr' => {'node' => 'id', 'capability' => 'id', 'setting' => 'id'}, 'forcearray' => false})
          network = hw['node']['node']['pci']['node']['pci:1']['node']['network']
         [{:name => network['logicalname'], :mac_address => network['serial'], :ip_address => network['configuration']['setting']['ip']['value'], 
           :physical_id => network['physid']}]
        end
  
      ######################################################################################################
      end  
      
    ##########################################################################################################
    end

  ##########################################################################################################
  end
  
##########################################################################################################
end
