############################################################################################################
module Aethyr

  ############################################################################################################
  module Linux
  
    ############################################################################################################
    module Interface
    
      ##########################################################################################################
      class Files
  
        ######################################################################################################
        #### class methods
        class << self
  
          ########################################################################################################
          def find(type = :all, options = {})
            if type.eql?(:first)
            else
              self.find_all
            end
          end

        ######################################################################################################
        protected
    
          ##########################################################################################################
          def find_all

            rows = `lsof -S 5 +L +D /`.split("\n")
            rows.collect do |r|
              attrs = r.split(/\s+/)
              vals = {
               :pid       => attrs[1],
               :fd        => attrs[3],
               :file_type => attrs[4],
               :device    => attrs[5],
               :size      => attrs[6],
               :nlink     => attrs[7],
               :i_node    => attrs[8],
               :name      => attrs[9],
              }
            end

          end
    
        ######################################################################################################
        end  
        
      ##########################################################################################################
      end
  
    ##########################################################################################################
    end

  ##########################################################################################################
  end
  
##########################################################################################################
end
