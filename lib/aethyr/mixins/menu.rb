##############################################################################################################
##############################################################################################################
module Aethyr

  ########################################################################################################
  module Mixins

    ########################################################################################################
    module Menu
      
      ########################################################################################################
      ########################################################################################################
      module Helper
      
        ######################################################################################################
        def menu(&block)      
          concat("<ul>", block.binding)
          yield
          concat('<div class="clear"></div>', block.binding)
          concat("</ul>", block.binding)
        end
  
        ######################################################################################################
        def menu_item(item, options = {})  
          content_tag :li, item, options 
        end
  
        ######################################################################################################
        def menu_content(args, &block)      
          if block_given?
            args.assert_valid_keys(:title)
            menu_content = content_tag(:ul, :style => 'display: none;') do
              capture(&block)
            end
            concat("<li class = \"menu\"> #{args[:title]}", block.binding)
            concat(menu_content, block.binding)
            concat("</li>", block.binding)
          else
            content_tag :li, args[:title]
          end
        end
          
      ########################################################################################################
      end
    
    ##########################################################################################################
    end

  ##########################################################################################################
  end
    
############################################################################################################
end